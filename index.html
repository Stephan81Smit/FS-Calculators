<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Freestock Calculators</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 0; }
    .container { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 32px; }
    h1 { text-align: center; color: #2d3e50; margin-bottom: 10px; }
    .instructions { text-align: center; color: #444; margin-bottom: 28px; }
    fieldset { border: none; padding: 0; margin: 0 0 32px; }
    legend { font-size: 1.5em; color: #1b5fc6; border-bottom: 1px solid #eee; padding-bottom: 4px; margin-bottom: 16px; display: block; }
    label { display: block; margin: 12px 0 6px; font-weight: 600; }
    input[type="number"], select {
      width: 100%; padding: 8px; font-size: 1em;
      border: 1px solid #ccc; border-radius: 4px;
    }
    .row { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 0; }
    .col { flex: 1 1 120px; min-width: 120px; max-width: 100%; }
    @media (max-width: 900px) { .col { flex: 1 1 100px; min-width: 100px; } }
    @media (max-width: 700px) { .col { flex: 1 1 90px; min-width: 90px; } }
    @media (max-width: 600px) {
      .row, .button-row { flex-direction: column; gap: 0; }
      .col { min-width: 100%; margin-bottom: 8px; }
      .results-table th, .results-table td { font-size: 1em; }
    }
    .results { background: #f1f3f6; border-radius: 8px; margin-top: 18px; padding: 18px; }
    .results-table {
      width: 100%; border-collapse: collapse; margin: 0 auto; background: #fff;
      border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.03);
    }
    .results-table th, .results-table td {
      padding: 10px 8px; text-align: left; border-bottom: 1px solid #ececec;
    }
    .results-table th { background: #f8f9fa; font-weight: 600; color: #1b5fc6; }
    .results-table tr:last-child td { border-bottom: none; }
    button {
      display: block; background: #2d7ff9; color: #fff; border: none;
      padding: 16px 0; border-radius: 5px; font-size: 1.2em;
      cursor: pointer; width: 100%; margin: 24px 0 0 0;
      font-weight: bold; letter-spacing: 1px;
      box-shadow: 0 2px 6px rgba(44,127,249,0.07);
      transition: background 0.2s;
    }
    button:disabled { background: #ccc; cursor: not-allowed; }
    button:hover:enabled { background: #1b5fc6; }
    .button-row { display: flex; gap: 16px; flex-wrap: wrap; }
    .error { color: red; font-size: 0.9em; text-align: center; margin-top: 10px; }
    .dual-section { display: flex; gap: 24px; flex-wrap: wrap; }
    .dual-col { flex: 1 1 380px; min-width: 320px; }
    @media (max-width: 900px) { .dual-col { min-width: 100%; } .dual-section { flex-direction: column; gap: 0; } }
  </style>
</head>
<body>
  <div class="container">
    <h1>Freestock Calculators</h1>
    <form id="pricingForm" autocomplete="off" onsubmit="return false;">
      <fieldset>
        <legend>Pricing Calculators</legend>
        <div class="dual-section">
          <!-- Cost to Selling Calculator -->
          <div class="dual-col">
            <h3>Cost to Selling</h3>
            <div class="row">
              <div class="col">
                <label for="cost_pricePerKg">Cost Price per kg (R/kg)</label>
                <input type="number" id="cost_pricePerKg" min="0.01" step="0.01" value="20" />
              </div>
              <div class="col">
                <label for="cost_weightEach">Weight Each (kg)</label>
                <input type="number" id="cost_weightEach" min="0.01" step="0.001" value="4.662" />
              </div>
              <div class="col">
                <label for="cost_gp">GP %</label>
                <input type="number" id="cost_gp" min="0" max="99.99" step="0.1" value="25" />
              </div>
            </div>
            <div class="results" id="costToSellingResults" style="display:none;" aria-live="polite">
              <table class="results-table">
                <tbody>
                  <tr>
                    <th>Cost per Item</th>
                    <td id="costToSelling_costPerItem"></td>
                  </tr>
                  <tr>
                    <th>Selling Price per Item</th>
                    <td id="costToSelling_sellingPerItem"></td>
                  </tr>
                  <tr>
                    <th>Selling Price per kg</th>
                    <td id="costToSelling_sellingPerKg"></td>
                  </tr>
                  <tr>
                    <th>Gross Profit per Item</th>
                    <td id="costToSelling_gpPerItem"></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="error" id="costToSellingError"></div>
          </div>
          <!-- Selling to Cost Calculator -->
          <div class="dual-col">
            <h3>Selling to Cost</h3>
            <div class="row">
              <div class="col">
                <label for="sell_sellingPerKg">Selling Price per kg (R/kg)</label>
                <input type="number" id="sell_sellingPerKg" min="0.01" step="0.01" value="26.67" />
              </div>
              <div class="col">
                <label for="sell_weightEach">Weight Each (kg)</label>
                <input type="number" id="sell_weightEach" min="0.01" step="0.001" value="4.662" />
              </div>
              <div class="col">
                <label for="sell_gp">GP %</label>
                <input type="number" id="sell_gp" min="0" max="99.99" step="0.1" value="25" />
              </div>
            </div>
            <div class="results" id="sellingToCostResults" style="display:none;" aria-live="polite">
              <table class="results-table">
                <tbody>
                  <tr>
                    <th>Selling Price per Item</th>
                    <td id="sellingToCost_sellingPerItem"></td>
                  </tr>
                  <tr>
                    <th>Cost per Item</th>
                    <td id="sellingToCost_costPerItem"></td>
                  </tr>
                  <tr>
                    <th>Cost Price per kg</th>
                    <td id="sellingToCost_costPerKg"></td>
                  </tr>
                  <tr>
                    <th>Gross Profit per Item</th>
                    <td id="sellingToCost_gpPerItem"></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="error" id="sellingToCostError"></div>
          </div>
        </div>
        <button type="reset" id="resetBtn">Reset</button>
      </fieldset>
    </form>
  </div>
  <script>
    // Utility for formatting
    const nf = new Intl.NumberFormat('en-ZA', { minimumFractionDigits: 2, maximumFractionDigits: 3 });

    // COST TO SELLING CALCULATOR
    function calculateCostToSelling() {
      const pricePerKg = parseFloat(document.getElementById('cost_pricePerKg').value);
      const weightEach = parseFloat(document.getElementById('cost_weightEach').value);
      const gp = parseFloat(document.getElementById('cost_gp').value);

      const errorDiv = document.getElementById('costToSellingError');
      errorDiv.textContent = '';
      if (!pricePerKg || !weightEach || gp >= 100) {
        errorDiv.textContent = gp >= 100 ? "GP% must be less than 100%." : "Please enter valid values.";
        document.getElementById('costToSellingResults').style.display = "none";
        return;
      }

      // Calculations
      const costPerItem = pricePerKg * weightEach;
      const sellingPerItem = costPerItem / (1 - gp / 100);
      const sellingPerKg = sellingPerItem / weightEach;
      const gpPerItem = sellingPerItem - costPerItem;

      // Output
      document.getElementById('costToSelling_costPerItem').textContent = "R " + nf.format(costPerItem);
      document.getElementById('costToSelling_sellingPerItem').textContent = "R " + nf.format(sellingPerItem);
      document.getElementById('costToSelling_sellingPerKg').textContent = "R " + nf.format(sellingPerKg);
      document.getElementById('costToSelling_gpPerItem').textContent = "R " + nf.format(gpPerItem);
      document.getElementById('costToSellingResults').style.display = "block";
    }

    // SELLING TO COST CALCULATOR
    function calculateSellingToCost() {
      const sellingPerKg = parseFloat(document.getElementById('sell_sellingPerKg').value);
      const weightEach = parseFloat(document.getElementById('sell_weightEach').value);
      const gp = parseFloat(document.getElementById('sell_gp').value);

      const errorDiv = document.getElementById('sellingToCostError');
      errorDiv.textContent = '';
      if (!sellingPerKg || !weightEach || gp >= 100) {
        errorDiv.textContent = gp >= 100 ? "GP% must be less than 100%." : "Please enter valid values.";
        document.getElementById('sellingToCostResults').style.display = "none";
        return;
      }

      // Calculations
      const sellingPerItem = sellingPerKg * weightEach;
      const costPerItem = sellingPerItem * (1 - gp / 100);
      const costPerKg = costPerItem / weightEach;
      const gpPerItem = sellingPerItem - costPerItem;

      // Output
      document.getElementById('sellingToCost_sellingPerItem').textContent = "R " + nf.format(sellingPerItem);
      document.getElementById('sellingToCost_costPerItem').textContent = "R " + nf.format(costPerItem);
      document.getElementById('sellingToCost_costPerKg').textContent = "R " + nf.format(costPerKg);
      document.getElementById('sellingToCost_gpPerItem').textContent = "R " + nf.format(gpPerItem);
      document.getElementById('sellingToCostResults').style.display = "block";
    }

    // Event listeners for instant calculation
    ["cost_pricePerKg", "cost_weightEach", "cost_gp"].forEach(id => {
      document.getElementById(id).addEventListener("input", calculateCostToSelling);
    });
    ["sell_sellingPerKg", "sell_weightEach", "sell_gp"].forEach(id => {
      document.getElementById(id).addEventListener("input", calculateSellingToCost);
    });

    // Reset button clears results and errors
    document.getElementById("resetBtn").addEventListener("click", () => {
      document.getElementById("costToSellingResults").style.display = "none";
      document.getElementById("sellingToCostResults").style.display = "none";
      document.getElementById("costToSellingError").textContent = "";
      document.getElementById("sellingToCostError").textContent = "";
    });

    // Initial calculation
    window.addEventListener('DOMContentLoaded', () => {
      calculateCostToSelling();
      calculateSellingToCost();
    });
  </script>
</body>
</html>
